name: test_workflow
on:
  pull_request:
    branches: [ main, master ]
  push:
    tags:        
      - '*'
  workflow_dispatch:
    inputs:
      full_test_suite:
        required: true
      neon_evm_commit:
        required: true
      neon_evm_branch:
        required: true
jobs:
  test:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - run: |
        echo ${GITHUB_REF##*/}
        echo ${{ github.event.action }}
    - name: set neon_evm_branch
      id: neon_evm_branch
      run: |
        echo "work"
        if [[ ""${{ github.event.inputs.neon_evm_branch }}" =~ "refs/tags/".* ]]; then
          NEON_EVM_TAG=${{ github.event.inputs.neon_evm_branch }##*/}
        else
          NEON_EVM_TAG=${{ github.event.inputs.neon_evm_commit }}
        fi
        echo "::set-output name=value::${NEON_EVM_TAG:-"latest"}"
    - run: |
          echo ${NEON_EVM_TAG}
